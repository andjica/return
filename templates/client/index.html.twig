{% extends 'main-metronic.html.twig' %}


{% block content %}

<div class="container-xxl mt-10">
    {% for message in app.flashes('success')%}
            <div class="alert alert-success mb-2" role="alert">
                {{message}}
            </div>
    {% endfor %}  
    {% for message in app.flashes('alert')%}
        <div class="alert alert-danger mb-2" role="alert">
            {{message}}
        </div>
    {% endfor %}

    <div class="hover-scroll-x x-style">
        <div class="d-grid mt-5">
            <ul class="nav nav-tabs flex-nowrap text-nowrap">
                <li class="nav-item">
                    <a class="nav-link btn btn-active-light btn-color-gray-600 btn-active-color-primary rounded-bottom-0 active" data-bs-toggle="tab" href="#kt_tab_pane">{% if countReturns is defined %}<span class="e-style"> {{countReturns}}</span> All  {% endif %} </a>
                </li>
                {% for st in status %}
                <li class="nav-item bg78">
                    <a class="nav-link btn btn-active-light btn-color-gray-600 btn-active-color-primary rounded-bottom-0" data-bs-toggle="tab" href="#kt_tab_pane_{{st.getId()}}">
                       {% if st.getKeyName == "in_progress" %}
                        <span class="e-style">{{countInProgress}}</span>   <span> {{st.getName()}} </span>

                        {% elseif st.getKeyName == "pending" %}
                        <span class="e-style">{{countPending}}</span>    {{st.getName()}} 

                        {% elseif st.getKeyName == "accepted" %}
                        <span class="e-style">{{countAccept}}</span>    {{st.getName()}}

                        {% elseif st.getKeyName == "completed" %}
                        <span class="e-style">{{countCompleted}}</span>    {{st.getName()}} 

                        {% elseif st.getKeyName == "in_delivery" %}
                        <span class="e-style">{{countInDelivery}}</span>    {{st.getName()}} 

                        {% elseif st.getKeyName == "delivered" %}
                        <span class="e-style">{{countInDelivered}}</span>   {{st.getName()}} 

                        {% elseif st.getKeyName == "denied" %}
                        <span class="e-style">{{countDenied}}</span>   {{st.getName()}} 

                        {% elseif st.getKeyName() == "refunded" %}
                        <span class="e-style">{{countRefund}}</span>    {{st.getName()}} 
                            
                        {% else %}

                        {% endif %}
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active " id="kt_tab_pane" role="tabpanel">
         
          {% include "components/tabs/all-returns.html.twig" %}
        </div>
        <div class="tab-pane fade" id="kt_tab_pane_1" role="tabpanel">
            {% include "components/tabs/in-progress.html.twig" %}
        </div>
        <div class="tab-pane fade" id="kt_tab_pane_2" role="tabpanel">
            {% include "components/tabs/pending.html.twig" %}
        </div>
         <div class="tab-pane fade" id="kt_tab_pane_3" role="tabpanel">
            {% include "components/tabs/accept.html.twig" %}
        </div>
         <div class="tab-pane fade" id="kt_tab_pane_4" role="tabpanel">
            {% include "components/tabs/completed.html.twig" %}
        </div>
          <div class="tab-pane fade" id="kt_tab_pane_5" role="tabpanel">
             {% include "components/tabs/in_delivery.html.twig" %}
        </div>
        <div class="tab-pane fade" id="kt_tab_pane_6" role="tabpanel">
            {% include "components/tabs/delivered.html.twig" %}
        </div>
         <div class="tab-pane fade" id="kt_tab_pane_7" role="tabpanel">
            {% include "components/tabs/denied.html.twig" %}
        </div>
        <div class="tab-pane fade" id="kt_tab_pane_8" role="tabpanel">
            {% include "components/tabs/refunded.html.twig" %}
        </div>
    </div>
       
    </div>
    <!-- missing file fixed -->

{% endblock %}
{% block javascripts %}
<script src="{{asset('/')}}assets/js/custom/customers/list/export.js"></script>
<script src="{{asset('/')}}assets/js/custom/customers/list/list.js"></script>
<script src="{{asset('/')}}assets/js/custom/customers/add.js"></script>
<script>    

        function searchTable() {
            var input, filter, table, tr, td, i;
            input = document.getElementById("search");
            filter = input.value.toUpperCase();
            table = document.getElementById("kt_customers_table");
            tr = table.getElementsByTagName("tr");

            // Loop through all table rows, and hide those who don't match the search query
            for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td") ; 
            for(j=0 ; j<td.length ; j++)
            {
            let tdata = td[j] ;
            if (tdata) {
                if (tdata.innerHTML.toUpperCase().indexOf(filter) > -1) {
                tr[i].style.display = "";
                break ; 
                } else {
                tr[i].style.display = "none";
                }
            } 
            }
        }
    }
    </script>
        <script>
        $('.send-to-trengo').on('click', function(e){
            e.preventDefault();

            const settings = {
            async: true,
            crossDomain: true,
            url: 'https://app.trengo.com/api/v2/tickets/5/custom_fields',
            method: 'POST',
            headers: {
                accept: 'application/json',
                'Access-Control-Allow-Origin':'*',
                'content-type': 'application/json',
                Authorization: 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxIiwianRpIjoiM2RiOWY3ZGZiNTZjOGFmNWYyNTExYzU1NmRkZThhNmU5ZmEzZTFhNGY3MDAzOTQ3MTU3NGQ4OGUxY2Y4MDdiYzA0MDNiZjQxMjI5MTA0Y2EiLCJpYXQiOjE2NjYzNTk4MjguODkyNjk1LCJuYmYiOjE2NjYzNTk4MjguODkyNjk3LCJleHAiOjQ3OTA0OTc0MjguODc3MDc3LCJzdWIiOiI1NTIwNjkiLCJzY29wZXMiOltdfQ.NhEcqjMM7mk8nfgMZ-qfly6zSPGukemYONe4rNZmpRKt3ASk1tCcaMYMRxYO7HLQk6eBebZ4p-tMsJjdI2j9Qg'
            },
            processData: false,
            data: '{"customer_id":5,"value":"TEst"}'
            };

            $.ajax(settings).done(function (response) {
            console.log(response);
            });
      });
    </script>
{% endblock %}